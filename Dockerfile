FROM ansibleplaybookbundle/apb-base

LABEL "com.redhat.apb.spec"=\
"LS0tCiMjIFNoYXJlZCBwYXJhbWV0ZXJzCl9iaW5kX3BhcmFtczogJl9iaW5kX3BhcmFtcwogICMg\
UHJvdmlzaW9uIGJpbmQgcGFyYW1zCiAgLSBuYW1lOiBlc191cmxfbmFtZQogICAgZGVmYXVsdDog\
RUxBU1RJQ1NFQVJDSF9VUkwKICAgIGRpc3BsYXlfZ3JvdXA6IEJpbmRpbmcKICAgIHJlcXVpcmVk\
OiBUcnVlCiAgICB0aXRsZTogRWxhc3RpY3NlYXJjaCBlbnZpcm9ubWVudCB2YXJpYWJsZSBuYW1l\
CiAgICBkZXNjcmlwdGlvbjogTmFtZSBvZiB0aGUgZW52aXJvbm1lbnRhbCB2YXJpYWJsZSB0aGF0\
IHdpbGwgcmVmZXIgdG8gdGhlIEVsYXN0aWNzZWFyY2ggVVJMLiBPbmx5IHdoZW4gdXNpbmcgYXN5\
bmNyaG9ub3VzIGJpbmRpbmcuCiAgICB0eXBlOiBzdHJpbmcKdmVyc2lvbjogMS4wCm5hbWU6IGVz\
LWFwYgpkZXNjcmlwdGlvbjogQVBCIHRvIGRlcGxveSBjbHVzdGVyLXJlYWR5IEVsYXN0aWNzZWFy\
Y2gKYmluZGFibGU6IFRydWUKYXN5bmM6IG9wdGlvbmFsCm1ldGFkYXRhOgogIGRpc3BsYXlOYW1l\
OiAiRWxhc3RpY3NlYXJjaCAoQVBCKSIKICBpbWFnZVVybDogaHR0cHM6Ly9naXRodWIuY29tL2Fu\
c2libGVwbGF5Ym9va2J1bmRsZS9lcy1hcGIvcmF3L21hc3Rlci9kb2NzL2ltZ3MvZWxhc3RpY3Nl\
YXJjaF9sb2dvLmpwZwogIGRvY3VtZW50YXRpb25Vcmw6IGh0dHBzOi8vd3d3LmVsYXN0aWMuY28v\
Z3VpZGUvZW4vZWxhc3RpY3NlYXJjaC9yZWZlcmVuY2UvNi4yL2luZGV4Lmh0bWwKICBwcm92aWRl\
ckRpc3BsYXlOYW1lOiAiUmVkIEhhdCwgSW5jLiIKdGFnczoKICAtIGVsYXN0aWNzZWFyY2gKcGxh\
bnM6CiAgLSBuYW1lOiBlcGhlbWVyYWwKICAgIGRlc2NyaXB0aW9uOiBUaGlzIHBsYW4gZGVwbG95\
cyBFbGFzdGljc2VhcmNoIHVzaW5nIGVwaGVtZXJhbCBzdG9yYWdlCiAgICBmcmVlOiBUcnVlCiAg\
ICBtZXRhZGF0YToKICAgICAgZGlzcGxheU5hbWU6IEVwaGVtZXJhbCBpbnN0YWxsYXRpb24KICAg\
IGRlZmF1bHQ6IFRydWUKICAgIHBhcmFtZXRlcnM6CiAgICAgIC0gbmFtZTogYXBwbGljYXRpb25f\
bmFtZQogICAgICAgIHR5cGU6IHN0cmluZwogICAgICAgIGRlZmF1bHQ6IGVsYXN0aWNzZWFyY2gK\
ICAgICAgICBkZXNjcmlwdGlvbjogTmFtZSBnaXZlbiB0byB0aGUgRWxhc3RpY3NlYXJjaCBjbHVz\
dGVyCiAgICAgICAgdGl0bGU6IENsdXN0ZXIgbmFtZQogICAgICAgIHJlcXVpcmVkOiB0cnVlCiAg\
ICAgIC0gbmFtZTogY2x1c3Rlcl9zaXplCiAgICAgICAgdHlwZTogaW50CiAgICAgICAgZGVmYXVs\
dDogMQogICAgICAgIGRlc2NyaXB0aW9uOiBOdW1iZXIgb2YgRWxhc3RpY3NlYXJjaCBpbnN0YW5j\
ZXMgdGhhdCB0aGUgY2x1c3RlciB3aWxsIGNvbnNpc3Qgb2YKICAgICAgICB0aXRsZTogQ2x1c3Rl\
ciBzaXplCiAgICAgICAgcmVxdWlyZWQ6IHRydWUKICAgICAgLSBuYW1lOiBlc19tZW1vcnlfbGlt\
aXQKICAgICAgICB0eXBlOiBzdHJpbmcKICAgICAgICBkZWZhdWx0OiA1MTJNaQogICAgICAgIGRl\
c2NyaXB0aW9uOiBNZW1vcnkgbGltaXQgZm9yIEVsYXN0aWNzZWFyY2ggY29udGFpbmVyCiAgICAg\
ICAgdGl0bGU6IE1lbW9yeSBsaW1pdAogICAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICAgIC0gbmFt\
ZTogZXNfdmVyc2lvbgogICAgICAgIHRpdGxlOiBWZXJzaW9uCiAgICAgICAgcmVxdWlyZWQ6IHRy\
dWUKICAgICAgICBkZWZhdWx0OiA2LjIuMQogICAgICAgIHR5cGU6IGVudW0KICAgICAgICBlbnVt\
OiBbIjYuMi4xIiwgIjYuMS4yIiwgIjUuNS4yIl0KICAgIGJpbmRfcGFyYW1ldGVyczogKl9iaW5k\
X3BhcmFtcwogIC0gbmFtZTogcGVyc2lzdGVudAogICAgZGVzY3JpcHRpb246IFRoaXMgcGxhbiBk\
ZXBsb3lzIEVsYXN0aWNzZWFyY2ggdXNpbmcgZXBoZW1lcmFsIHN0b3JhZ2UKICAgIGZyZWU6IFRy\
dWUKICAgIG1ldGFkYXRhOgogICAgICBkaXNwbGF5TmFtZTogUGVyc2lzdGVudCBpbnN0YWxsYXRp\
b24KICAgIHBhcmFtZXRlcnM6CiAgICAgIC0gbmFtZTogYXBwbGljYXRpb25fbmFtZQogICAgICAg\
IHR5cGU6IHN0cmluZwogICAgICAgIGRlZmF1bHQ6IGVsYXN0aWNzZWFyY2gKICAgICAgICBkZXNj\
cmlwdGlvbjogTmFtZSBnaXZlbiB0byB0aGUgRWxhc3RpY3NlYXJjaCBjbHVzdGVyCiAgICAgICAg\
dGl0bGU6IENsdXN0ZXIgbmFtZQogICAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICAgIC0gbmFtZTog\
Y2x1c3Rlcl9zaXplCiAgICAgICAgdHlwZTogaW50CiAgICAgICAgZGVmYXVsdDogMQogICAgICAg\
IGRlc2NyaXB0aW9uOiBOdW1iZXIgb2YgRWxhc3RpY3NlYXJjaCBpbnN0YW5jZXMgdGhhdCB0aGUg\
Y2x1c3RlciB3aWxsIGNvbnNpc3Qgb2YKICAgICAgICB0aXRsZTogQ2x1c3RlciBzaXplCiAgICAg\
ICAgcmVxdWlyZWQ6IHRydWUKICAgICAgLSBuYW1lOiBlc19tZW1vcnlfbGltaXQKICAgICAgICB0\
eXBlOiBzdHJpbmcKICAgICAgICBkZWZhdWx0OiA1MTJNaQogICAgICAgIGRlc2NyaXB0aW9uOiBN\
ZW1vcnkgbGltaXQgZm9yIEVsYXN0aWNzZWFyY2ggY29udGFpbmVyCiAgICAgICAgdGl0bGU6IE1l\
bW9yeSBsaW1pdAogICAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICAgIC0gbmFtZTogZXNfdmVyc2lv\
bgogICAgICAgIHRpdGxlOiBWZXJzaW9uCiAgICAgICAgcmVxdWlyZWQ6IHRydWUKICAgICAgICBk\
ZWZhdWx0OiA2LjIuMQogICAgICAgIHR5cGU6IGVudW0KICAgICAgICBlbnVtOiBbIjYuMi4xIiwg\
IjYuMS4yIiwgIjUuNS4yIl0KICAgICAgLSBuYW1lOiBlc19wdmNfc2l6ZQogICAgICAgIHR5cGU6\
IHN0cmluZwogICAgICAgIGRlZmF1bHQ6IDFHaQogICAgICAgIGRlc2NyaXB0aW9uOiBFbGFzdGlj\
c2VhcmNoIHN0b3JhZ2Ugc2l6ZQogICAgICAgIHRpdGxlOiBFbGFzdGljc2VhcmNoIHN0b3JhZ2UK\
ICAgICAgICByZXF1aXJlZDogdHJ1ZQogICAgYmluZF9wYXJhbWV0ZXJzOiAqX2JpbmRfcGFyYW1z\
Cg=="

COPY playbooks /opt/apb/actions
COPY . /opt/ansible/roles/es-apb
RUN chmod -R g=u /opt/{ansible,apb}
USER apb
